webpackJsonp([10],{288:function(e,t,a){"use strict";t.__esModule=!0;var r=a(89),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=s.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}},314:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(288),n=r(s),i=a(23),o=r(i);t.default={data:function(){return{launchers:[],form:{taskTitle:"",taskContent:"",awardFee:"",startTime:"",endTime:"",creatorUserId:""},startTimeOptions:{},endTimeOptions:{},saveForm:{},formRules:{taskTitle:[{required:!0,message:"任务标题不能为空",trigger:"blur"},{max:20,message:"任务标题20字以内",trigger:"change"}],taskContent:[{required:!0,message:"任务描述不能为空",trigger:"blur"},{max:50,message:"任务描述50字以内",trigger:"change"}],awardFee:[{required:!0,message:"任务奖励不能为空",trigger:"blur"},{max:5,message:"任务奖励5位数以内",trigger:"change"},{validator:function(e,t,a,r,s){var n=[];0==t&&a("任务奖励必须大于0"),/^\d+(\.\d+)?$/.test(t)||a("任务奖励必须为数字"),a(n)}}],startTime:[{required:!0,type:"date",message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,type:"date",message:"请选择结束时间",trigger:"change"}],creatorUserId:[{required:!0,message:"请选择发起人",trigger:"change"}]}}},created:function(){this.$route.query.taskId&&this.getTask(),this.getLaunchers()},methods:{startTimeChange:function(e){var t=this;this.starttime=e,this.endTimeOptions={disabledDate:function(e){var a=t.form.startTime?new Date(t.form.startTime).valueOf():"";return e&&e.valueOf()<a}}},endTimeChange:function(e){var t=this;this.endtime=e,this.startTimeOptions={disabledDate:function(e){var a=t.form.endTime?new Date(t.form.endTime).valueOf()-864e5:"";return e&&e.valueOf()>a}}},getLaunchers:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mtg/acti/task/launchers",method:"get"}).then(function(t){if(0===t.data.retCode){var a;(a=e.launchers).push.apply(a,(0,o.default)(t.data.data))}else e.$Message.warning(t.data.retMsg)}).catch(function(e){})},getTask:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/acti/task/get",method:"get",params:{taskId:this.$route.query.taskId}}).then(function(t){0===t.data.retCode?(e.form.id=t.data.data.id,e.form.taskTitle=t.data.data.taskTitle,e.form.taskContent=t.data.data.taskContent,e.form.awardFee=t.data.data.awardFee.toString(),e.form.startTime=e.formatDate(new Date(t.data.data.startTime),"yyyy-MM-dd hh:mm"),e.form.endTime=e.formatDate(new Date(t.data.data.endTime),"yyyy-MM-dd hh:mm"),e.form.creatorUserId=t.data.data.creatorUserId):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},saveTask:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/acti/task/save",method:"post",data:this.saveForm}).then(function(t){0===t.data.retCode?(e.$Message.success("任务新增成功！"),e.$router.push({name:"task"})):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},addTask:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.saveForm=(0,n.default)({},e.form),e.saveForm.startTime=e.timestamp(e.saveForm.startTime),e.saveForm.endTime=e.timestamp(e.saveForm.endTime),e.saveTask())})},saveEditTask:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/acti/task/edit",method:"post",data:this.saveForm}).then(function(t){0===t.data.retCode?(e.$Message.success("任务编辑成功！"),e.$router.push({name:"task"})):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},editTask:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.saveForm=(0,n.default)({},e.form),e.saveForm.startTime=e.timestamp(e.saveForm.startTime),e.saveForm.endTime=e.timestamp(e.saveForm.endTime),e.saveEditTask())})},cancel:function(){this.$router.push({name:"task"})}}}},393:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-body"},[a("Form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":80}},[a("FormItem",{attrs:{label:"任务标题",prop:"taskTitle"}},[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:"任务标题，20字"},model:{value:e.form.taskTitle,callback:function(t){e.$set(e.form,"taskTitle",t)},expression:"form.taskTitle"}})],1),e._v(" "),a("FormItem",{attrs:{label:"任务描述",prop:"taskContent"}},[a("Input",{staticClass:"cc-w-300",attrs:{type:"textarea",placeholder:"任务描述，50字"},model:{value:e.form.taskContent,callback:function(t){e.$set(e.form,"taskContent",t)},expression:"form.taskContent"}})],1),e._v(" "),a("FormItem",{attrs:{label:"任务奖励",prop:"awardFee"}},[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:"请输入任务奖励金额"},model:{value:e.form.awardFee,callback:function(t){e.$set(e.form,"awardFee",t)},expression:"form.awardFee"}})],1),e._v(" "),a("FormItem",{attrs:{label:"开始时间",prop:"startTime"}},[a("DatePicker",{staticClass:"cc-w-300",attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"",options:e.startTimeOptions},on:{"on-change":e.startTimeChange},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),a("FormItem",{attrs:{label:"结束时间",prop:"endTime"}},[a("DatePicker",{staticClass:"cc-w-300",attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"",options:e.endTimeOptions},on:{"on-change":e.endTimeChange},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("FormItem",{attrs:{label:"发起人",prop:"creatorUserId"}},[a("Select",{staticClass:"cc-w-300",model:{value:e.form.creatorUserId,callback:function(t){e.$set(e.form,"creatorUserId",t)},expression:"form.creatorUserId"}},e._l(e.launchers,function(t){return a("Option",{key:t.launcherId,attrs:{value:t.launcherId}},[e._v(e._s(t.launcherName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:""}},[e.$route.query.taskId?a("Button",{attrs:{type:"primary"},on:{click:e.editTask}},[e._v("保存修改")]):a("Button",{attrs:{type:"primary"},on:{click:e.addTask}},[e._v("新增发布")]),e._v(" "),a("Button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},s=[];r._withStripped=!0;var n={render:r,staticRenderFns:s};t.default=n},94:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(314),s=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,function(){return r[e]})}(n);var i=a(393),o=a.n(i),m=a(6),d=m(s.a,o.a,!1,null,null,null);d.options.__file="src/views/taskManagement/addTask.vue",t.default=d.exports}});