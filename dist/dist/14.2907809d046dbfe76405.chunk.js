webpackJsonp([14,15],{213:function(e,t,a){"use strict";function r(e){l||a(290)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(287),i=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);var o=a(292),c=a.n(o),l=!1,u=a(6),d=r,m=u(i.a,c.a,!1,d,"data-v-9d4a527e",null);m.options.__file="src/views/teamManagement/eliteManagement.vue",t.default=m.exports},220:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(306),s=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var n=a(381),o=a.n(n),c=a(6),l=c(s.a,o.a,!1,null,null,null);l.options.__file="src/views/IM/addGroup.vue",t.default=l.exports},272:function(e,t,a){"use strict";function r(e,t){for(var a=0;a<e.length;a++)if(e[a].userId===t.userId)return a;return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{isRadio:{type:Boolean,default:!1},url:{type:String,default:""},checkedData:{type:Array,default:function(){return[]}}},data:function(){return{checked:[],userList:[],search:"",resList:[],redio:""}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/"+this.url,method:"get"}).then(function(t){0===t.data.retCode&&t.data.data&&(e.userList=t.data.data)}).catch(function(e){})},checkChange:function(e){var t=this,a=[];e.forEach(function(e){a.push(t.resList[e])}),this.$emit("val",a)},radioChange:function(e){this.$emit("val",this.resList[e])},searchUser:function(){for(var e=this.userList,t=[],a=new RegExp(this.search),r=0;r<e.length;r++)(e[r].userName&&e[r].userName.match(a)||e[r].userPhone&&e[r].userPhone.match(a))&&t.push(e[r]);this.resList=t,this.checkedChange()},delChecked:function(e){this.checked.splice(e,1)},checkedChange:function(){var e=this;this.checked=[],this.checkedData.forEach(function(t){var a=r(e.resList,t);a>-1&&e.checked.push(a)})}}}},274:function(e,t,a){"use strict";function r(e){l||a(275)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(272),i=a.n(s);for(var n in s)"default"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);var o=a(277),c=a.n(o),l=!1,u=a(6),d=r,m=u(i.a,c.a,!1,d,"data-v-1ea60565",null);m.options.__file="src/views/my-components/searchUser.vue",t.default=m.exports},275:function(e,t,a){var r=a(276);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(14)("57d962f4",r,!1,{})},276:function(e,t,a){t=e.exports=a(13)(!1),t.push([e.i,"\n.res-list[data-v-1ea60565] {\n  width: 300px;\n  height: 200px;\n  overflow-y: auto;\n  border: 1px solid #dddee1;\n  margin-top: 10px;\n  padding: 10px;\n}\n",""])},277:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.searchUser}},[e._v("搜索")]),e._v(" "),a("div",{staticClass:"res-list"},[e.isRadio?a("RadioGroup",{on:{"on-change":e.radioChange},model:{value:e.redio,callback:function(t){e.redio=t},expression:"redio"}},e._l(e.resList,function(t,r){return a("p",{key:r},[a("Radio",{attrs:{label:r}},[e._v(e._s(t.userName+"  ("+t.userPhone+")"))])],1)})):a("CheckboxGroup",{on:{"on-change":e.checkChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.resList,function(t,r){return a("p",{key:r},[a("Checkbox",{attrs:{label:r}},[e._v(e._s(t.userName+"   ("+t.userPhone+")"))])],1)}))],1)],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.default=i},287:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(274),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={data:function(){var e=this;return{addModal:!1,form:{},selectedList:[],query:{groupType:2,pageNo:0,pageSize:10},total:0,table:[{title:"序号",type:"index",width:100,align:"center"},{title:"成员名称",key:"userName"},{title:"手机号码",key:"phone"},{title:"创建时间",key:"createTime",render:function(t,a){return t("div",[t("p",{},e.formatDate(new Date(a.row.createTime),"yyyy-MM-dd hh:mm"))])}},{title:"操作",key:"action",width:300,align:"center",render:function(t,a){return t("div",[t("Button",{style:{marginRight:"5px"},on:{click:function(){e.$Modal.confirm({title:"确认移除",content:"确认移除？",onOk:function(){e.delElite(a.row.userId,a.index)}})}}},"移除"),t("Button",{style:{marginRight:"5px"},on:{click:function(){e.moveElite(a.row.userId,"UP")}}},"上移"),t("Button",{on:{click:function(){e.moveElite(a.row.userId,"DOWN")}}},"下移")])}}],tableData:[]}},components:{searchUser:s.default},created:function(){this.getEliteList()},methods:{getEliteList:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/elite/page",method:"get",params:this.query}).then(function(t){0===t.data.retCode?(e.tableData=t.data.data.data,e.total=parseInt(t.data.data.total)):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},pageChange:function(e){this.query.pageNo=e-1,this.getEliteList()},moveElite:function(e,t){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/elite/move",method:"post",params:{groupType:this.query.groupType,user:e,direction:t}}).then(function(e){0===e.data.retCode?(a.getEliteList(),a.$Message.success(e.data.retMsg)):a.$Message.warning(e.data.retMsg)}).catch(function(e){})},delElite:function(e,t){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/elite/remove",method:"post",params:{groupType:this.query.groupType,user:e}}).then(function(e){0===e.data.retCode?(a.tableData.splice(t,1),a.$Message.success("移除成功！")):a.$Message.warning(e.data.retMsg)}).catch(function(e){})},delItem:function(e){this.$refs.searchUser.delChecked(e),this.selectedList.splice(e,1)},addElite:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/elite/add",method:"post",params:{groupType:this.query.groupType},data:this.form}).then(function(t){0===t.data.retCode?(e.$Message.success("成员新增成功！"),e.getEliteList()):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},getMemberList:function(e){var t=this;this.selectedList=e,this.selectedList.forEach(function(e){t.form[e.userId]=e.userName})},selectChange:function(){this.getEliteList()}}}},290:function(e,t,a){var r=a(291);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(14)("15985786",r,!1,{})},291:function(e,t,a){t=e.exports=a(13)(!1),t.push([e.i,"\n.selected-item[data-v-9d4a527e] {\n  position: relative;\n  display: inline-block;\n}\n.selected-item .del-item[data-v-9d4a527e] {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  z-index: 99;\n  font-size: 20px;\n  cursor: pointer;\n}\n",""])},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"20"}},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":e.selectChange},model:{value:e.query.groupType,callback:function(t){e.$set(e.query,"groupType",t)},expression:"query.groupType"}},[a("Option",{attrs:{value:2}},[e._v("团队明星")]),e._v(" "),a("Option",{attrs:{value:3}},[e._v("金牌讲师")]),e._v(" "),a("Option",{attrs:{value:4}},[e._v("精英排行")])],1)],1),e._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.addModal=!0}}},[e._v("添加精英")])],1)],1),e._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.table,data:e.tableData}}),e._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:e.total},on:{"on-change":e.pageChange}}),e._v(" "),a("Modal",{attrs:{title:"添加精英"},on:{"on-ok":e.addElite},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("Form",{staticClass:"cc-m-t-10",attrs:{model:e.form,"label-width":80}},[a("FormItem",{attrs:{label:"成员选择"}},[a("searchUser",{key:e.addModal,ref:"searchUser",attrs:{url:"mgt/user/group/list?groupType="+e.query.groupType},on:{val:e.getMemberList}})],1),e._v(" "),a("FormItem",{attrs:{label:"已选成员"}},e._l(e.selectedList,function(t,r){return a("div",{key:r,staticClass:"cc-m-b-10"},[a("div",{staticClass:"selected-item"},[a("Icon",{staticClass:"del-item",attrs:{type:"close-circled"},nativeOn:{click:function(t){e.delItem(r)}}}),e._v(" "),a("Input",{staticClass:"cc-w-150",attrs:{placeholder:"",readonly:""},model:{value:t.userName,callback:function(a){e.$set(t,"userName",a)},expression:"item.userName"}})],1)])}))],1)],1)],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.default=i},306:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(274),i=r(s),n=a(213);r(n);t.default={data:function(){var e=this;return{member:{userId:"",userName:"",userPhone:""},groupid:"",memberModal:!1,isRadio:!0,manager:"",form:{grpName:"",intro:"",joinmode:"",catalog:"",grpOwnerId:"",type:1},rules:{grpName:[{required:!0,message:"群组名称不能为空",trigger:"blur"}],intro:[{required:!0,message:"群组描述不能为空",trigger:"blur"}],joinmode:[{required:!0,type:"number",message:"请选择加群方式",trigger:"change"}],catalog:[{required:!0,type:"number",message:"请选择企业类目",trigger:"change"}]},joinmodeList:[{value:0,label:"不用验证"},{value:1,label:"需要验证"},{value:2,label:"不允许任何人加入"}],table:[{title:"序号",type:"index",width:80,align:"center"},{title:"会员名称",key:"userName"},{title:"手机号码",key:"userPhone"},{title:"操作",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{on:{click:function(){e.kickOut(a.row.userId,a.index)}}},"移除")])}}],tableData:[]}},components:{searchUser:i.default},methods:{add:function(){var e=this;this.$refs.form.validate(function(t){t&&e.addGroup()})},addGroup:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/create",method:"post",data:this.form}).then(function(t){0===t.data.retCode?(e.$Message.success("新建成功！"),e.groupid=t.data.data,e.$router.push({name:"groupManagement"})):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},getMember:function(e){this.member=e},addMember:function(){if(this.isRadio)this.form.grpOwnerId=this.member.userId;else{var e=[];this.member.forEach(function(t){e.push(t.userId)}),this.memberJoin(e)}},memberJoin:function(e){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/join",method:"post",params:{group:this.groupid},data:e}).then(function(e){0===e.data.retCode?(t.tableData=t.member,t.$Message.success("添加成功！")):t.$Message.warning(e.data.retMsg)}).catch(function(e){})},kickOut:function(e,t){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/kickOut",method:"post",params:{group:this.groupid,kickUser:e}}).then(function(e){0===e.data.retCode?(a.$Message.success("移除成功！"),a.tableData.splice(t,1)):a.$Message.warning(e.data.retMsg)}).catch(function(e){})}}}},381:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-body"},[a("Form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":120}},[a("h3",[e._v("基本设置")]),e._v(" "),a("FormItem",{attrs:{label:"群组名称",prop:"grpName"}},[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:""},model:{value:e.form.grpName,callback:function(t){e.$set(e.form,"grpName",t)},expression:"form.grpName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"群组描述",prop:"intro"}},[a("Input",{staticClass:"cc-w-300",attrs:{type:"textarea",placeholder:""},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),e._v(" "),a("FormItem",{attrs:{label:"加群方式",prop:"joinmode"}},[a("Select",{staticClass:"cc-w-300",model:{value:e.form.joinmode,callback:function(t){e.$set(e.form,"joinmode",t)},expression:"form.joinmode"}},e._l(e.joinmodeList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"企业类目",prop:"catalog"}},[a("Select",{staticClass:"cc-w-300",model:{value:e.form.catalog,callback:function(t){e.$set(e.form,"catalog",t)},expression:"form.catalog"}},[a("Option",{attrs:{value:1}},[e._v("城市大咖")]),e._v(" "),a("Option",{attrs:{value:2}},[e._v("兴趣部落")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"设置管理员"}},[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:""},model:{value:e.member.userName,callback:function(t){e.$set(e.member,"userName",t)},expression:"member.userName"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.memberModal=!0,e.isRadio=!0}}},[e._v("添加")])],1),e._v(" "),a("FormItem",{attrs:{label:""}},[a("Button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("创建群")])],1),e._v(" "),a("h3",[e._v("管理员/成员设置")]),e._v(" "),a("FormItem",{attrs:{label:"添加群成员"}},[a("Table",{ref:"selection",staticClass:"cc-float-l",attrs:{border:"",columns:e.table,data:e.tableData,width:"800"}}),e._v(" "),a("Button",{staticClass:"cc-float-l cc-m-l-5",attrs:{type:"primary"},on:{click:function(t){e.memberModal=!0,e.isRadio=!1}}},[e._v("添加")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"选择成员"},on:{"on-ok":e.addMember},model:{value:e.memberModal,callback:function(t){e.memberModal=t},expression:"memberModal"}},[a("searchUser",{key:e.isRadio,attrs:{url:"mgt/user/im/list",isRadio:e.isRadio},on:{val:e.getMember}})],1)],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.default=i}});