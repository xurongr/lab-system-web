webpackJsonp([16],{237:function(e,t,a){"use strict";function l(e){u||a(344)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(283),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var r=a(346),o=a.n(r),u=!1,c=a(9),v=l,d=c(s.a,o.a,!1,v,"data-v-032ee4dc",null);d.options.__file="src/views/memberManagement/memberLevel.vue",t.default=d.exports},283:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{current:1,pageNo:0,total:0,levelList:[],ruleList:[],status:0,stateList:[{value:0,label:"全部"},{value:1,label:"启用"},{value:2,label:"禁用"}],pageNo1:0,levelTotal:[],levelSelect:[],optTypeList:[{value:0,label:"无"},{value:1,label:"直推"},{value:2,label:"伞下"}],levelUpgradeRule:{levelId:null,afterLevelId:null,needMoney:null,optType:0,conditionLevelId:null,num:null,createTime:""},keyword:"",start:1,modal:!1,levelManageDto:{id:null,levelName:"",status:1,typeList:[{typeName:"直推奖励",typeCode:"DIRECT_PUSH",ratio:null},{typeName:"间推奖励",typeCode:"INDIRECT_PUSH",ratio:null},{typeName:"市场补贴",typeCode:"MARKET_SUBSIDY",ratio:null},{typeName:"公排奖励",typeCode:"PUBLIC_RANKING",ratio:null}]},ruleModal:!1,flag:1,levelId:null,tab:0,table:[{title:"序号",type:"index",align:"center",width:60},{title:"等级名称",align:"center",key:"levelName"},{title:"直推奖励",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("直推奖励"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"间推奖励",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("间推奖励"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"市场补贴",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("市场补贴"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"公排奖励",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("公排奖励"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"状态",align:"center",key:"status",render:function(e,t){return e("div",[e("span",{style:{color:1===t.row.status?"#444":"red"}},1===t.row.status?"启用":"禁用")])}},{title:"创建时间",align:"center",key:"createTime"}],ruleTable:[{title:"序号",type:"index",align:"center",width:60},{title:"升级前等级",align:"center",key:"levelName"},{title:"升级后等级",align:"center",key:"afterLevelName"},{title:"充值金额",align:"center",key:"needMoney"},{title:"推广类型",align:"center",key:"optType",render:function(e,t){return e("div",[e("p",{},0===t.row.optType?"无":1===t.row.optType?"直推":"伞下")])}},{title:"推广会员等级",align:"center",key:"conditionLevelName"},{title:"推广数量",align:"center",key:"num"},{title:"状态",align:"center",key:"status",render:function(e,t){return e("div",[e("p",{style:{color:1===t.row.status?"#444":"red"}},1===t.row.status?"启用":"禁用")])}},{title:"创建时间",align:"center",key:"createTime"}]}},created:function(){this.getLevelList(),this.getLevel()},methods:{tabChange:function(e){this.tab=e,0===e?(this.pageNo=0,this.total=0,this.current=1,this.getLevelList()):(this.pageNo=0,this.total=0,this.current=1,this.getGradeList())},isModal:function(e){this.flag=e,1===e||2===e&&null!==this.levelId?this.modal=!0:this.$Message.warning("请先选择操作对象！")},isRuleModal:function(e){this.flag=e,1===e?this.ruleModal=!0:null===this.levelId?this.$Message.warning("请先现在操作对象！"):this.ruleModal=!0},changePage:function(e){this.pageNo=e-1,this.getLevelList()},choiceUser:function(e,t){var a=this;0===this.tab?(this.levelManageDto.id=e.id,this.levelManageDto.levelName=e.levelName,this.levelManageDto.status=e.status,this.levelId=e.id,e.typeList.map(function(e){"直推奖励"===e.typeName?a.levelManageDto.typeList[0]=e:"间推奖励"===e.typeName?a.levelManageDto.typeList[1]=e:"市场补贴"===e.typeName?a.levelManageDto.typeList[2]=e:"公排奖励"===e.typeName&&(a.levelManageDto.typeList[3]=e)})):1===this.tab&&(this.levelUpgradeRule=e,this.levelId=e.levelId)},searchLevel:function(e){this.pageNo=0,1===e?this.getLevelList():this.getGradeList()},getLevelList:function(){var e=this,t=this.serviceurl+"/backstage/user/pageLevelManage",a=void 0;a=0===e.status?"":e.status;var l={keyword:e.keyword,status:a,pageNo:e.pageNo,pageSize:10},n=null;e.$http(t,l,n,"get").then(function(t){n=t.data,0===n.retCode?(e.levelList=n.data.data,e.total=parseInt(n.data.total),e.levelId=null,e.levelManageDto={levelName:"",status:1,typeList:[{typeName:"直推奖励",typeCode:"DIRECT_PUSH",ratio:null},{typeName:"间推奖励",typeCode:"INDIRECT_PUSH",ratio:null},{typeName:"市场补贴",typeCode:"MARKET_SUBSIDY",ratio:null},{typeName:"公排奖励",typeCode:"PUBLIC_RANKING",ratio:null}]}):e.$Message.warning(n.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},addLevel:function(){var e=this,t=this.serviceurl+"/backstage/user/addOrModifyLevel",a=e.levelManageDto;e.$http(t,"",a,"post").then(function(t){0===t.data.retCode?(1===e.flag?e.$Message.success("等级新增成功！"):2===e.flag?e.$Message.success("等级修改成功！"):3===e.flag&&e.$Message.success("状态修改成功！"),e.modal=!1,e.getLevelList()):e.$Message.warning(t.data.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},editStatus:function(e){null===this.levelId?this.$Message.warning("请先选择操作对象！"):(this.flag=3,this.levelManageDto.status=e,this.addLevel())},delLevel:function(){var e=this;if(null===e.levelId)e.$Message.warning("请先选择等级!");else{var t=this.serviceurl+"/backstage/user/delLevel",a={levelId:e.levelId};e.$http(t,a,"","get").then(function(t){0===t.data.retCode?(e.$Message.success("删除等级成功！"),e.getLevelList()):e.$Message.warning(t.data.retMsg)}).catch(function(t){e.$Message.error("请求错误")})}},getLevel:function(){var e=this,t=this.serviceurl+"/backstage/user/pageLevelManage",a={pageNo:e.pageNo1,pageSize:10},l=null;e.$http(t,a,l,"get").then(function(t){if(l=t.data,0===l.retCode){e.levelTotal=e.levelTotal.concat(l.data.data);var a=parseInt(l.data.total);e.levelTotal.length<a&&(e.pageNo1++,e.getLevel()),e.levelTotal.map(function(t){e.levelSelect.push({value:t.id,label:t.levelName})})}else e.$Message.warning(l.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},submitUpGrade:function(){var e=this,t=this.serviceurl+"/backstage/user/addOrModifyUpgrade";1===e.flag&&(e.levelUpgradeRule.createTime=(new Date).getTime()),2!==e.flag&&3!==e.flag||(e.levelUpgradeRule.updateTime=(new Date).getTime());var a=e.levelUpgradeRule;e.$http(t,"",a,"post").then(function(t){0===t.data.retCode?(1===e.flag?e.$Message.success("等级新增成功！"):2===e.flag?e.$Message.success("等级修改成功！"):3===e.flag&&e.$Message.success("状态修改成功！"),e.levelId=null,e.levelUpgradeRule={levelId:null,afterLevelId:null,needMoney:null,optType:0,conditionLevelId:null,num:null,createTime:""},e.ruleModal=!1,e.getGradeList()):e.$Message.warning(t.data.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},getGradeList:function(){var e=this,t=this.serviceurl+"/backstage/user/pageUpgrade",a=void 0;a=0===e.status?"":e.status;var l={status:a,pageNo:e.pageNo,pageSize:10},n=null;e.$http(t,l,n,"get").then(function(t){n=t.data,0===n.retCode?(e.ruleList=n.data.data,e.total=parseInt(n.data.total)):e.$Message.warning(n.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},ruleStatusChange:function(e){null===this.levelId?this.$Message.warning("请先选择操作对象！"):(this.flag=3,this.levelUpgradeRule.status=e,this.submitUpGrade())},delRule:function(){var e=this;if(null==e.levelId||void 0==e.levelId)e.$Message.warning("请先选择等级!");else{var t=this.serviceurl+"/backstage/user/delUpgrade?levelId="+e.levelId;e.$http(t,"","","post").then(function(t){0===t.data.retCode?(e.$Message.success("删除升级规则成功！"),e.getGradeList()):e.$Message.warning(t.data.retMsg||"删除升级规则失败！")}).catch(function(t){e.$Message.error("请求错误")})}}}}},344:function(e,t,a){var l=a(345);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(16)("455ece19",l,!1,{})},345:function(e,t,a){t=e.exports=a(15)(!1),t.push([e.i,"\n[data-v-032ee4dc] .ivu-tabs-bar {\n  margin-bottom: 0;\n}\n.add-member[data-v-032ee4dc] {\n  font-size: 14px;\n  text-align: right;\n  padding-right: 12%;\n}\n.add-member p[data-v-032ee4dc] {\n  padding-top: 10px;\n}\n.add-member p[data-v-032ee4dc]:nth-child(1) {\n  text-align: center;\n  padding-top: 0;\n  font-weight: 600;\n  letter-spacing: 1px;\n}\n.add-member p[data-v-032ee4dc] .ivu-input-wrapper {\n  width: 75%;\n}\n.add-member .level-btn[data-v-032ee4dc] {\n  text-align: center;\n  margin-top: 20px;\n}\n",""])},346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Tabs",{attrs:{type:"card",animated:!1},on:{"on-click":e.tabChange}},[a("TabPane",{attrs:{label:"会员等级"}},[a("div",{staticClass:"cc-m-b-10 member-list-search"},[a("div",{staticClass:"m-search-top"},[a("div",{staticClass:"m-search-top-left"},[a("p",[e._v("等级名称   "),a("Input",{staticStyle:{width:"110px"},attrs:{placeholder:"关键字模糊搜索"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("p",[e._v("\n                            状态   \n                            "),a("Select",{staticStyle:{width:"130px"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.stateList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)])]),e._v(" "),a("div",{staticClass:"m-search-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.searchLevel(1)}}},[e._v("查询")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isModal(1)}}},[e._v("新增")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isModal(2)}}},[e._v("编辑")]),e._v(" "),1!==e.levelManageDto.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.editStatus(1)}}},[e._v("启用")]):e._e(),e._v(" "),1===e.levelManageDto.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.editStatus(2)}}},[e._v("禁用")]):e._e(),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:e.delLevel}},[e._v("删除")])],1)]),e._v(" "),a("div",{staticClass:"main-body"},[a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.table,data:e.levelList,"highlight-row":!0},on:{"on-row-click":e.choiceUser}}),e._v(" "),a("div",{staticClass:"page"},[a("Page",{key:e.total,staticClass:"cc-m-t-20",attrs:{total:e.total,current:e.current},on:{"on-change":e.changePage}})],1)],1),e._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("div",{staticClass:"add-member"},[1===e.flag?a("p",[e._v("新增")]):e._e(),e._v(" "),2===e.flag?a("p",[e._v("编辑")]):e._e(),e._v(" "),a("p",[e._v("等级名称  "),a("Input",{attrs:{placeholder:"输入等级名称，如：普通会员"},model:{value:e.levelManageDto.levelName,callback:function(t){e.$set(e.levelManageDto,"levelName",t)},expression:"levelManageDto.levelName"}})],1),e._v(" "),a("p",[e._v("直推奖励  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[0].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[0],"ratio",t)},expression:"levelManageDto.typeList[0].ratio"}})],1),e._v(" "),a("p",[e._v("间推奖励  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[1].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[1],"ratio",t)},expression:"levelManageDto.typeList[1].ratio"}})],1),e._v(" "),a("p",[e._v("市场补贴  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[2].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[2],"ratio",t)},expression:"levelManageDto.typeList[2].ratio"}})],1),e._v(" "),a("p",[e._v("公排奖励  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[3].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[3],"ratio",t)},expression:"levelManageDto.typeList[3].ratio"}})],1),e._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:e.addLevel}},[e._v("提交")])],1)])])],1),e._v(" "),a("TabPane",{attrs:{label:"升级规则"}},[a("div",{staticClass:"cc-m-b-10 member-list-search"},[a("div",{staticClass:"m-search-top"},[a("p",[e._v("状态   \n                        "),a("Select",{staticStyle:{width:"130px"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.stateList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)]),e._v(" "),a("div",{staticClass:"m-search-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.searchLevel(2)}}},[e._v("查询")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isRuleModal(1)}}},[e._v("新增")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isRuleModal(2)}}},[e._v("编辑")]),e._v(" "),1!==e.levelUpgradeRule.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.ruleStatusChange(1)}}},[e._v("启用")]):e._e(),e._v(" "),1==e.levelUpgradeRule.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.ruleStatusChange(2)}}},[e._v("禁用")]):e._e(),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:e.delRule}},[e._v("删除")])],1)]),e._v(" "),a("div",{staticClass:"main-body"},[a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.ruleTable,data:e.ruleList,"highlight-row":!0},on:{"on-row-click":e.choiceUser}}),e._v(" "),a("div",{staticClass:"page"},[a("Page",{key:e.total,staticClass:"cc-m-t-20",attrs:{total:e.total,current:e.current},on:{"on-change":e.changePage}})],1)],1),e._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:e.ruleModal,callback:function(t){e.ruleModal=t},expression:"ruleModal"}},[a("div",{staticClass:"add-member"},[1===e.flag?a("p",[e._v("新增")]):e._e(),e._v(" "),2===e.flag?a("p",[e._v("编辑")]):e._e(),e._v(" "),a("p",[e._v("升级前等级  \n                        "),a("Select",{staticStyle:{width:"70%","text-align":"left"},model:{value:e.levelUpgradeRule.levelId,callback:function(t){e.$set(e.levelUpgradeRule,"levelId",t)},expression:"levelUpgradeRule.levelId"}},e._l(e.levelSelect,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("p",[e._v("升级后等级  \n                        "),a("Select",{staticStyle:{width:"70%","text-align":"left"},model:{value:e.levelUpgradeRule.afterLevelId,callback:function(t){e.$set(e.levelUpgradeRule,"afterLevelId",t)},expression:"levelUpgradeRule.afterLevelId"}},e._l(e.levelSelect,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("p",[e._v("充值金额  "),a("Input",{staticStyle:{width:"70%","text-align":"left"},attrs:{placeholder:"输入充值金额，如：1350"},model:{value:e.levelUpgradeRule.needMoney,callback:function(t){e.$set(e.levelUpgradeRule,"needMoney",t)},expression:"levelUpgradeRule.needMoney"}})],1),e._v(" "),a("p",[e._v("推广类型  \n                        "),a("Select",{staticStyle:{width:"70%","text-align":"left"},model:{value:e.levelUpgradeRule.optType,callback:function(t){e.$set(e.levelUpgradeRule,"optType",t)},expression:"levelUpgradeRule.optType"}},e._l(e.optTypeList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("p",[e._v("推广会员等级  \n                        "),a("Select",{staticStyle:{width:"70%","text-align":"left"},model:{value:e.levelUpgradeRule.conditionLevelId,callback:function(t){e.$set(e.levelUpgradeRule,"conditionLevelId",t)},expression:"levelUpgradeRule.conditionLevelId"}},e._l(e.levelSelect,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("p",[e._v("推广数量  "),a("Input",{staticStyle:{width:"70%","text-align":"left"},attrs:{placeholder:"输入数量，如：5"},model:{value:e.levelUpgradeRule.num,callback:function(t){e.$set(e.levelUpgradeRule,"num",t)},expression:"levelUpgradeRule.num"}})],1),e._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:e.submitUpGrade}},[e._v("提交")])],1)])])],1)],1)],1)},n=[];l._withStripped=!0;var s={render:l,staticRenderFns:n};t.default=s}});