webpackJsonp([15],{237:function(e,t,a){"use strict";function l(e){c||a(335)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(281),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(337),r=a.n(o),c=!1,u=a(9),v=l,d=u(s.a,r.a,!1,v,"data-v-032ee4dc",null);d.options.__file="src/views/memberManagement/memberLevel.vue",t.default=d.exports},281:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{current:1,pageNo:0,total:0,levelList:[],status:0,stateList:[{value:0,label:"全部"},{value:1,label:"启用"},{value:2,label:"禁用"}],keyword:"",phone:null,start:1,modal:!1,levelManageDto:{id:null,levelName:"",status:1,typeList:[{typeName:"直推奖励",typeCode:"DIRECT_PUSH",ratio:null},{typeName:"间推奖励",typeCode:"INDIRECT_PUSH",ratio:null},{typeName:"市场补贴",typeCode:"MARKET_SUBSIDY",ratio:null},{typeName:"公排奖励",typeCode:"PUBLIC_RANKING",ratio:null}]},ruleModal:!1,flag:1,levelId:null,table:[{title:"序号",type:"index",align:"center",width:60},{title:"等级名称",align:"center",key:"levelName"},{title:"直推奖励",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("直推奖励"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"间推奖励",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("间推奖励"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"市场补贴",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("市场补贴"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"公排奖励",align:"center",key:"typeName",render:function(e,t){return e("p",t.row.typeList.map(function(e){if("公排奖励"===e.typeName)return 0===e.ratio?"无":null===e.ratio?"无":e.ratio+"%"}))}},{title:"状态",align:"center",key:"status",render:function(e,t){return e("div",[e("span",{style:{color:1===t.row.status?"#444":"red"}},1===t.row.status?"启用":"禁用")])}},{title:"创建时间",align:"center",key:"createTime"}],ruleTable:[{title:"序号",type:"index",align:"center",width:60},{title:"升级前等级",align:"center",key:""},{title:"升级后等级",align:"center",key:""},{title:"充值金额",align:"center",key:""},{title:"推广类型",align:"center",key:""},{title:"推广会员等级",align:"center",key:""},{title:"推广数量",align:"center",key:""},{title:"状态",align:"center",key:""},{title:"创建时间",align:"center",key:""}]}},created:function(){this.getLevelList()},methods:{isModal:function(e){this.flag=e,1===e||2===e&&null!==this.levelId?this.modal=!0:this.$Message.warning("请先选择操作对象！")},isRuleModal:function(e){this.ruleModal=!0,this.flag=e},changePage:function(e){this.pageNo=e-1,this.getLevelList()},choiceUser:function(e,t){var a=this;this.levelId=e.id,this.levelManageDto.id=e.id,this.levelManageDto.levelName=e.levelName,this.levelManageDto.status=e.status,e.typeList.map(function(e){"直推奖励"===e.typeName?a.levelManageDto.typeList[0]=e:"间推奖励"===e.typeName?a.levelManageDto.typeList[1]=e:"市场补贴"===e.typeName?a.levelManageDto.typeList[2]=e:"公排奖励"===e.typeName&&(a.levelManageDto.typeList[3]=e)})},searchLevel:function(){this.pageNo=0,this.getLevelList()},getLevelList:function(){var e=this,t=this.serviceurl+"/backstage/user/pageLevelManage",a=void 0;a=0===e.status?"":e.status;var l={keyword:e.keyword,status:a,pageNo:e.pageNo,pageSize:10},n=null;e.$http(t,l,n,"get").then(function(t){n=t.data,0===n.retCode?(e.levelList=n.data.data,e.total=parseInt(n.data.total),e.levelId=null,e.levelManageDto={levelName:"",status:1,typeList:[{typeName:"直推奖励",typeCode:"DIRECT_PUSH",ratio:null},{typeName:"间推奖励",typeCode:"INDIRECT_PUSH",ratio:null},{typeName:"市场补贴",typeCode:"MARKET_SUBSIDY",ratio:null},{typeName:"公排奖励",typeCode:"PUBLIC_RANKING",ratio:null}]}):e.$Message.warning(n.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},addLevel:function(){var e=this,t=this.serviceurl+"/backstage/user/addOrModifyLevel",a=e.levelManageDto;e.$http(t,"",a,"post").then(function(t){0===t.data.retCode?(1===e.flag?e.$Message.success("等级新增成功！"):2===e.flag?e.$Message.success("等级修改成功！"):3===e.flag&&e.$Message.success("状态修改成功！"),e.modal=!1,e.getLevelList()):e.$Message.warning(t.data.retMsg)}).catch(function(t){e.$Message.error("请求错误")})},editStatus:function(e){null===this.levelId?this.$Message.warning("请先选择操作对象！"):(this.flag=3,this.levelManageDto.status=e,this.addLevel())},delLevel:function(){var e=this;if(null===e.levelId)e.$Message.warning("请先选择等级!");else{var t=this.serviceurl+"/backstage/user/delLevel",a={levelId:e.levelId};e.$http(t,a,"","get").then(function(t){0===t.data.retCode?(e.$Message.success("删除等级成功！"),e.getLevelList()):e.$Message.warning(t.data.retMsg)}).catch(function(t){e.$Message.error("请求错误")})}}}}},335:function(e,t,a){var l=a(336);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(16)("455ece19",l,!1,{})},336:function(e,t,a){t=e.exports=a(15)(!1),t.push([e.i,"\n[data-v-032ee4dc] .ivu-tabs-bar {\n  margin-bottom: 0;\n}\n.add-member[data-v-032ee4dc] {\n  font-size: 14px;\n  text-align: right;\n  padding-right: 12%;\n}\n.add-member p[data-v-032ee4dc] {\n  padding-top: 10px;\n}\n.add-member p[data-v-032ee4dc]:nth-child(1) {\n  text-align: center;\n  padding-top: 0;\n  font-weight: 600;\n  letter-spacing: 1px;\n}\n.add-member p[data-v-032ee4dc] .ivu-input-wrapper {\n  width: 75%;\n}\n.add-member .level-btn[data-v-032ee4dc] {\n  text-align: center;\n  margin-top: 20px;\n}\n",""])},337:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Tabs",{attrs:{type:"card",animated:!1}},[a("TabPane",{attrs:{label:"会员等级"}},[a("div",{staticClass:"cc-m-b-10 member-list-search"},[a("div",{staticClass:"m-search-top"},[a("div",{staticClass:"m-search-top-left"},[a("p",[e._v("等级名称   "),a("Input",{staticStyle:{width:"110px"},attrs:{placeholder:"关键字模糊搜索"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("p",[e._v("\n                            状态   \n                            "),a("Select",{staticStyle:{width:"130px"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.stateList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)])]),e._v(" "),a("div",{staticClass:"m-search-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:e.searchLevel}},[e._v("查询")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isModal(1)}}},[e._v("新增")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isModal(2)}}},[e._v("编辑")]),e._v(" "),2===e.levelManageDto.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.editStatus(1)}}},[e._v("启用")]):e._e(),e._v(" "),1===e.levelManageDto.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.editStatus(2)}}},[e._v("禁用")]):e._e(),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:e.delLevel}},[e._v("删除")])],1)]),e._v(" "),a("div",{staticClass:"main-body"},[a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.table,data:e.levelList,"highlight-row":!0},on:{"on-row-click":e.choiceUser}}),e._v(" "),a("div",{staticClass:"page"},[a("Page",{key:e.total,staticClass:"cc-m-t-20",attrs:{total:e.total,current:e.current},on:{"on-change":e.changePage}})],1)],1),e._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("div",{staticClass:"add-member"},[1===e.flag?a("p",[e._v("新增")]):e._e(),e._v(" "),2===e.flag?a("p",[e._v("编辑")]):e._e(),e._v(" "),a("p",[e._v("等级名称  "),a("Input",{attrs:{placeholder:"输入等级名称，如：普通会员"},model:{value:e.levelManageDto.levelName,callback:function(t){e.$set(e.levelManageDto,"levelName",t)},expression:"levelManageDto.levelName"}})],1),e._v(" "),a("p",[e._v("直推奖励  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[0].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[0],"ratio",t)},expression:"levelManageDto.typeList[0].ratio"}})],1),e._v(" "),a("p",[e._v("间推奖励  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[1].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[1],"ratio",t)},expression:"levelManageDto.typeList[1].ratio"}})],1),e._v(" "),a("p",[e._v("市场补贴  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[2].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[2],"ratio",t)},expression:"levelManageDto.typeList[2].ratio"}})],1),e._v(" "),a("p",[e._v("公排奖励  "),a("Input",{attrs:{placeholder:"输入奖励比例，如：8%输入8"},model:{value:e.levelManageDto.typeList[3].ratio,callback:function(t){e.$set(e.levelManageDto.typeList[3],"ratio",t)},expression:"levelManageDto.typeList[3].ratio"}})],1),e._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:e.addLevel}},[e._v("提交")])],1)])])],1),e._v(" "),a("TabPane",{attrs:{label:"升级规则"}},[a("div",{staticClass:"cc-m-b-10 member-list-search"},[a("div",{staticClass:"m-search-top"},[a("p",[e._v("状态   \n                        "),a("Select",{staticStyle:{width:"130px"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.stateList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)]),e._v(" "),a("div",{staticClass:"m-search-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:e.searchLevel}},[e._v("查询")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isRuleModal(1)}}},[e._v("新增")]),e._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(t){return e.isRuleModal(2)}}},[e._v("编辑")]),e._v(" "),e.start?a("Button",{staticClass:"btn btn-blue",on:{click:function(t){e.start=!e.start}}},[e._v("启用")]):e._e(),e._v(" "),e.start?e._e():a("Button",{staticClass:"btn btn-blue",on:{click:function(t){e.start=!e.start}}},[e._v("禁用")]),e._v(" "),a("Button",{staticClass:"btn btn-blue"},[e._v("删除")])],1)]),e._v(" "),a("div",{staticClass:"main-body"},[a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.ruleTable,data:e.levelList}}),e._v(" "),a("div",{staticClass:"page"},[a("Page",{key:e.total,staticClass:"cc-m-t-20",attrs:{total:e.total}})],1)],1),e._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:e.ruleModal,callback:function(t){e.ruleModal=t},expression:"ruleModal"}},[a("div",{staticClass:"add-member"},[1===e.flag?a("p",[e._v("新增")]):e._e(),e._v(" "),2===e.flag?a("p",[e._v("编辑")]):e._e(),e._v(" "),a("p",[e._v("升级前等级  \n                        ")]),e._v(" "),a("p",[e._v("升级后等级  \n                        ")]),e._v(" "),a("p",[e._v("充值金额  "),a("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"输入充值金额，如：1350"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("p",[e._v("推广类型  \n                        ")]),e._v(" "),a("p",[e._v("推广会员等级  \n                        ")]),e._v(" "),a("p",[e._v("推广数量  "),a("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"输入数量，如：5"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue"},[e._v("提交")])],1)])])],1)],1)],1)},n=[];l._withStripped=!0;var s={render:l,staticRenderFns:n};t.default=s}});