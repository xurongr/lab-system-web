webpackJsonp([16],{221:function(e,t,a){"use strict";function n(e){d||a(382)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(307),r=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);var o=a(384),c=a.n(o),d=!1,l=a(6),u=n,h=l(r.a,c.a,!1,u,"data-v-c8e3672a",null);h.options.__file="src/views/teamManagement/directorate/memberManagement.vue",t.default=h.exports},272:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<e.length;a++)if(e[a].userId===t.userId)return a;return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{isRadio:{type:Boolean,default:!1},url:{type:String,default:""},checkedData:{type:Array,default:function(){return[]}}},data:function(){return{checked:[],userList:[],search:"",resList:[],redio:""}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/"+this.url,method:"get"}).then(function(t){0===t.data.retCode&&t.data.data&&(e.userList=t.data.data)}).catch(function(e){})},checkChange:function(e){var t=this,a=[];e.forEach(function(e){a.push(t.resList[e])}),this.$emit("val",a)},radioChange:function(e){this.$emit("val",this.resList[e])},searchUser:function(){for(var e=this.userList,t=[],a=new RegExp(this.search),n=0;n<e.length;n++)(e[n].userName&&e[n].userName.match(a)||e[n].userPhone&&e[n].userPhone.match(a))&&t.push(e[n]);this.resList=t,this.checkedChange()},delChecked:function(e){this.checked.splice(e,1)},checkedChange:function(){var e=this;this.checked=[],this.checkedData.forEach(function(t){var a=n(e.resList,t);a>-1&&e.checked.push(a)})}}}},274:function(e,t,a){"use strict";function n(e){d||a(275)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(272),r=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);var o=a(277),c=a.n(o),d=!1,l=a(6),u=n,h=l(r.a,c.a,!1,u,"data-v-1ea60565",null);h.options.__file="src/views/my-components/searchUser.vue",t.default=h.exports},275:function(e,t,a){var n=a(276);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(14)("57d962f4",n,!1,{})},276:function(e,t,a){t=e.exports=a(13)(!1),t.push([e.i,"\n.res-list[data-v-1ea60565] {\n  width: 300px;\n  height: 200px;\n  overflow-y: auto;\n  border: 1px solid #dddee1;\n  margin-top: 10px;\n  padding: 10px;\n}\n",""])},277:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.searchUser}},[e._v("搜索")]),e._v(" "),a("div",{staticClass:"res-list"},[e.isRadio?a("RadioGroup",{on:{"on-change":e.radioChange},model:{value:e.redio,callback:function(t){e.redio=t},expression:"redio"}},e._l(e.resList,function(t,n){return a("p",{key:n},[a("Radio",{attrs:{label:n}},[e._v(e._s(t.userName+"  ("+t.userPhone+")"))])],1)})):a("CheckboxGroup",{on:{"on-change":e.checkChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.resList,function(t,n){return a("p",{key:n},[a("Checkbox",{attrs:{label:n}},[e._v(e._s(t.userName+"   ("+t.userPhone+")"))])],1)}))],1)],1)},s=[];n._withStripped=!0;var r={render:n,staticRenderFns:s};t.default=r},307:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(274),s=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={data:function(){var e=this;return{addModal:!1,form:{},jobList:[],selectedList:[],query:{orgId:this.$route.query.id,pageNo:0,pageSize:10},total:0,table:[{title:"序号",type:"index",width:100,align:"center"},{title:"成员名称",key:"username"},{title:"手机号码",key:"phone"},{title:"职位",key:"roleName"},{title:"创建时间",key:"createTime",render:function(t,a){return t("div",[t("p",{},e.formatDate(new Date(a.row.createTime),"yyyy-MM-dd hh:mm"))])}},{title:"操作",key:"action",width:200,align:"center",render:function(t,a){return t("div",[t("Button",{on:{click:function(){e.$Modal.confirm({title:"确认移除",content:"确认移除？",onOk:function(){e.delMember(a.row.userId,a.index)}})}}},"移除")])}}],tableData:[]}},components:{searchUser:s.default},created:function(){this.getMember(),this.getJob()},methods:{getJob:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/job/title/all",method:"get"}).then(function(t){0===t.data.retCode?e.jobList=t.data.data:e.$Message.warning(t.data.retMsg)}).catch(function(e){})},getMember:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/organization/page/member",method:"get",params:this.query}).then(function(t){0===t.data.retCode?(e.tableData=t.data.data.data,e.total=parseInt(t.data.data.total)):e.$Message.warning(t.data.retMsg)}).catch(function(e){})},pageChange:function(e){this.query.pageNo=e-1,this.getMember()},delMember:function(e,t){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/organization/member/del",method:"post",params:{orgId:this.$route.query.id,user:e}}).then(function(e){0===e.data.retCode?(a.tableData.splice(t,1),a.$Message.success(e.data.retMsg)):a.$Message.warning(e.data.retMsg)}).catch(function(e){})},delItem:function(e){this.$refs.searchUser.delChecked(e),this.selectedList.splice(e,1)},getMemberList:function(e){this.selectedList=e},selectChange:function(e,t){this.selectedList[e].jobId=t},addMember:function(){var e=this;this.selectedList.forEach(function(t,a){e.form[t.userId]=t.jobId}),this.$http({url:this.serviceurl+"/weteam-service/mgt/organization/member/add",method:"post",params:{orgId:this.$route.query.id},data:this.form}).then(function(t){0===t.data.retCode?(e.$Message.success("成员新增成功！"),e.getMember()):e.$Message.warning(t.data.retMsg)}).catch(function(e){})}}}},382:function(e,t,a){var n=a(383);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(14)("128e22eb",n,!1,{})},383:function(e,t,a){t=e.exports=a(13)(!1),t.push([e.i,"\n.selected-item[data-v-c8e3672a] {\n  position: relative;\n  display: inline-block;\n}\n.selected-item .del-item[data-v-c8e3672a] {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  z-index: 99;\n  font-size: 20px;\n  cursor: pointer;\n}\n.res-list[data-v-c8e3672a] {\n  width: 300px;\n  height: 200px;\n  overflow-y: auto;\n  border: 1px solid #dddee1;\n  margin-top: 10px;\n  padding: 10px;\n}\n",""])},384:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"20"}},[a("h3",[e._v(e._s(e.$route.query.name))])]),e._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.addModal=!0}}},[e._v("添加成员")])],1)],1),e._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.table,data:e.tableData}}),e._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:e.total},on:{"on-change":e.pageChange}}),e._v(" "),a("Modal",{attrs:{title:"添加成员"},on:{"on-ok":e.addMember},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("Form",{staticClass:"cc-m-t-10",attrs:{model:e.form,"label-width":80}},[a("FormItem",{attrs:{label:"部门名称"}},[a("p",[e._v(e._s(e.$route.query.name))])]),e._v(" "),a("FormItem",{attrs:{label:"成员选择"}},[a("searchUser",{key:e.addModal,ref:"searchUser",attrs:{url:"mgt/user/org/list"},on:{val:e.getMemberList}})],1),e._v(" "),a("FormItem",{attrs:{label:"已选成员"}},e._l(e.selectedList,function(t,n){return a("div",{key:n,staticClass:"cc-m-b-10"},[a("div",{staticClass:"selected-item"},[a("Icon",{staticClass:"del-item",attrs:{type:"close-circled"},nativeOn:{click:function(t){e.delItem(n)}}}),e._v(" "),a("Input",{staticClass:"cc-w-150",attrs:{placeholder:"",readonly:""},model:{value:t.userName,callback:function(a){e.$set(t,"userName",a)},expression:"item.userName"}})],1),e._v(" "),a("span",[e._v("  职位  ")]),e._v(" "),a("Select",{staticClass:"cc-w-150",on:{"on-change":function(t){e.selectChange(n,t)}}},e._l(e.jobList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.jobName))])}))],1)}))],1)],1)],1)},s=[];n._withStripped=!0;var r={render:n,staticRenderFns:s};t.default=r}});