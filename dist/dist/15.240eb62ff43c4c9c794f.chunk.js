webpackJsonp([15],{242:function(t,e,a){"use strict";function n(t){l||a(363)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(290),o=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var c=a(365),r=a.n(c),l=!1,d=a(9),p=n,u=d(o.a,r.a,!1,p,"data-v-7799d1dd",null);u.options.__file="src/views/storeManagement/index.vue",e.default=u.exports},290:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{pageNo:0,total:0,current:1,tableData:[],keyword:"",shopId:null,shopInfo:[],incomeType:[],incomeData:[],setIncomeData:[],start:!1,incomeModal:!1,paramsModal:!1,table:[{title:"序号",type:"index",align:"center",width:60},{title:"店铺ID",align:"center",key:"id"},{title:"店铺名称",align:"center",key:"shopName"},{title:"描述",align:"center",key:"shopDescribe"},{title:"地址",align:"center",key:"addr"},{title:"状态",align:"center",key:"status",render:function(t,e){return t("div",[t("p",{style:{color:1===e.row.status?"444":"red"}},1===e.row.status?"营业":"停业")])}},{title:"负责人",align:"center",key:"shopowner"},{title:"创建时间",align:"center",key:"createTime"},{title:"更新时间",align:"center",key:"updateTime"}]}},created:function(){this.getShopList(),this.getShopIncomeType()},methods:{choiceUser:function(t,e){this.shopId=t.id,this.shopInfo=t},goInfoStore:function(t){1===t?this.$router.push({path:"/addStore",query:{flag:t}}):2===t&&(null===this.shopId?this.$Message.warning("请先选择操作对象！"):this.$router.push({path:"/editStore",query:{flag:t,shopInfo:this.shopInfo}}))},changePage:function(t){this.pageNo=t-1,this.getShopList()},searchStore:function(){this.pageNo=0,this.getShopList()},getShopList:function(){var t=this,e=t.serviceurl+"/backstage/shop/pageShop",a={keyword:t.keyword,pageNo:t.pageNo,pageSize:10};t.$http(e,a,"","get").then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(e){t.$Message.error("请求错误")})},goStaffManage:function(){null===this.shopId?this.$Message.warning("请先选择店铺！"):this.$router.push({path:"/staffManagement",query:{shopId:this.shopId}})},statusChange:function(t){if(null===this.shopId)this.$Message.warning("请先选择店铺！");else{var e=this,a=e.serviceurl+"/backstage/shop/addOrModifyShop";e.shopInfo.status=t;var n=e.shopInfo;e.$http(a,"",n,"post").then(function(t){0===t.data.retCode?(e.$Message.success("店铺状态修改成功！"),e.shopId=null,e.getShopList()):e.$Message.warning(t.data.retMsg||"店铺状态修改失败！")}).catch(function(t){e.$Message.error("请求错误")})}},getShopIncomeType:function(){var t=this,e=t.serviceurl+"/backstage/shop/getShopSubsidyIncomeType";t.$http(e,"","","get").then(function(e){0===e.data.retCode?(t.incomeType=e.data.data,t.incomeType.map(function(e){1===e.isSubsidy&&t.setIncomeData.push({typeCode:e.code,name:e.name,id:null,ratio:null})})):t.$Message.warning(e.data.retMsg)}).catch(function(e){t.$Message.error("请求错误")})},incomeSet:function(){var t=this;if(null===this.shopId)this.$Message.warning("请先选择店铺！");else{var e=this;e.setIncomeData=[],e.getShopIncomeType(),e.incomeModal=!0;var a=e.serviceurl+"/backstage/shop/getShopIncomeSubsidyValue",n={shopId:this.shopId};e.$http(a,n,"","get").then(function(a){0===a.data.retCode?(e.incomeData=a.data.data,e.incomeData.map(function(t){e.setIncomeData.map(function(e){t.typeCode===e.typeCode&&(e.ratio=t.ratio),t.typeCode===e.typeCode&&(e.id=t.id)})}),e.setIncomeData=e.setIncomeData.map(function(a){return t.$set(a,"shopId",e.shopId),a})):e.$Message.warning(a.data.retMsg)}).catch(function(t){e.$Message.error("请求错误")})}},setIncomeSubsidy:function(){var t=this,e=t.serviceurl+"/backstage/shop/setShopIncomeSubsidy";t.setIncomeData.map(function(t){t.ratio=parseInt(t.ratio)});var a=t.setIncomeData;t.$http(e,"",a,"post").then(function(e){0===e.data.retCode?(t.$Message.success("店铺收益补贴比例修改成功！"),t.shopId=null,t.incomeModal=!1,t.getShopList()):t.$Message.warning(e.data.retMsg||"店铺收益补贴比例修改失败！")}).catch(function(e){t.$Message.error("请求错误")})}}}},363:function(t,e,a){var n=a(364);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("fad125a6",n,!1,{})},364:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.income-setting[data-v-7799d1dd] {\n  font-size: 14px;\n  text-align: right;\n  padding-right: 10%;\n}\n.income-setting p[data-v-7799d1dd] {\n  padding-top: 10px;\n}\n.income-setting p[data-v-7799d1dd]:nth-child(1) {\n  text-align: center;\n  padding-top: 0;\n  font-weight: 600;\n  letter-spacing: 1px;\n}\n.income-setting .level-btn[data-v-7799d1dd] {\n  text-align: center;\n  margin-top: 40px;\n}\n",""])},365:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"cc-m-b-10 member-list-search"},[a("div",{staticClass:"m-search-top"},[a("div",{staticClass:"m-search-top-left"},[a("p",[t._v("店铺名称   "),a("Input",{staticStyle:{width:"110px"},attrs:{placeholder:"关键字模糊搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),t._v(" "),a("div",{staticClass:"m-search-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:t.searchStore}},[t._v("查询")]),t._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(e){return t.goInfoStore(1)}}},[t._v("新增")]),t._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(e){return t.goInfoStore(2)}}},[t._v("编辑")]),t._v(" "),1!==t.shopInfo.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(e){return t.statusChange(1)}}},[t._v("启用")]):t._e(),t._v(" "),1===t.shopInfo.status?a("Button",{staticClass:"btn btn-blue",on:{click:function(e){return t.statusChange(2)}}},[t._v("禁用")]):t._e(),t._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:t.goStaffManage}},[t._v("员工管理")]),t._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:t.incomeSet}},[t._v("收益设置")]),t._v(" "),a("Button",{staticClass:"btn btn-blue",on:{click:function(e){t.paramsModal=!0}}},[t._v("参数设置")])],1)]),t._v(" "),a("div",{staticClass:"main-body"},[a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData,"highlight-row":!0},on:{"on-row-click":t.choiceUser}}),t._v(" "),a("div",{staticClass:"page"},[a("Page",{key:t.total,staticClass:"cc-m-t-20",attrs:{total:t.total,current:t.current},on:{"on-change":t.changePage}})],1)],1),t._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:t.incomeModal,callback:function(e){t.incomeModal=e},expression:"incomeModal"}},[a("div",{staticClass:"income-setting"},[a("p",[t._v("收益设置")]),t._v(" "),t._l(t.setIncomeData,function(e,n){return a("p",{key:n},[t._v("\n                "+t._s(e.name)+"  "),a("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"输入：如15%"},model:{value:e.ratio,callback:function(a){t.$set(e,"ratio",a)},expression:"item.ratio"}})],1)}),t._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:t.setIncomeSubsidy}},[t._v("保存")])],1)],2)]),t._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:t.paramsModal,callback:function(e){t.paramsModal=e},expression:"paramsModal"}},[a("div",{staticClass:"income-setting"},[a("p",[t._v("参数设置")]),t._v(" "),a("p",[t._v("应用ID  "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入二维火应用ID"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("p",[t._v("appKey  "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入二维火appKey"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("p",[t._v("appSecret  "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入二维火appSecret"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("p",[t._v("点餐URL  "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入二维火点餐URL"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("p",[t._v("外卖URL  "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入二维火外卖URL"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("p",[t._v("充值URL  "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入二维火充值URL"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue"},[t._v("保存")])],1)])])],1)},s=[];n._withStripped=!0;var o={render:n,staticRenderFns:s};e.default=o}});