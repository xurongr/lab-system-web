webpackJsonp([50],{247:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(343),s=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a(451),d=a.n(r),o=a(6),u=o(s.a,d.a,!1,null,null,null);u.options.__file="src/views/fundManagement/fundList.vue",e.default=u.exports},343:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=this;return{loading:!0,modelIndex:-1,editModal:!1,form:{fundName:"",fundsTypeId:"",fundsRate:"",remarks:""},rules:{fundsTypeId:[{required:!0,type:"number",message:"请选择基金类型",trigger:"change"}],fundsRate:[{required:!0,message:"所占比例不能为空",trigger:"blur"}],remarks:[{required:!0,message:"备注不能为空",trigger:"blur"}]},query:{pageNo:0,pageSize:10},fundType:{},total:0,table:[{title:"序号",type:"index",width:100,align:"center"},{title:"基金类型",key:"optionName"},{title:"基金所占比例",key:"fundsRate"},{title:"备注",key:"remarks"},{title:"操作时间",key:"createDt",render:function(e,a){return e("div",[e("p",{},t.formatDate(new Date(a.row.createDt),"yyyy-MM-dd hh:mm"))])}},{title:"操作",key:"action",width:400,align:"center",render:function(e,a){var n="";return n=0===a.row.appDisplay?e("Button",{style:{marginRight:"5px"},on:{click:function(){t.showAtApp(a.row.id)}}},"在App展示"):e("Button",{style:{marginRight:"5px"},on:{click:function(){t.showAtApp(a.row.id)}}},"不在App展示"),e("div",[e("Button",{style:{marginRight:"5px"},on:{click:function(){t.editPro(a.index,a.row.id)}}},"编辑"),n])}}],tableData:[]}},created:function(){this.getFundList(),this.getFundType()},methods:{getFundList:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/funds/type/page",method:"get",params:this.query}).then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(t){})},getFundType:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/funds/type/list",method:"get",params:this.query}).then(function(e){0===e.data.retCode?t.fundType=e.data.data:t.$Message.warning(e.data.retMsg)}).catch(function(t){})},addFundType:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/funds/type/save",method:"post",data:this.form}).then(function(e){0===e.data.retCode?(t.editModal=!1,t.$Message.success("新增成功！"),t.getFundList()):(t.loading=!1,setTimeout(function(){t.loading=!0},200),t.$Message.warning(e.data.retMsg))}).catch(function(e){t.editModal=!1,t.$Message.success("新增失败！")})},editFundType:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/funds/type/update",method:"post",data:this.form}).then(function(e){0===e.data.retCode?(t.editModal=!1,t.$Message.success("编辑成功！"),t.getFundList()):(t.loading=!1,setTimeout(function(){t.loading=!0},200),t.$Message.warning(e.data.retMsg))}).catch(function(e){t.editModal=!1})},pageChange:function(t){this.query.pageNo=t-1,this.getFundList()},editConfirm:function(){var t=this;this.$refs.form.validate(function(e){e?-1==t.modelIndex?t.addFundType():t.editFundType():(t.loading=!1,setTimeout(function(){t.loading=!0},200))})},editPro:function(t,e){this.editModal=!0,this.modelIndex=t,this.$refs.form.resetFields(),t>=0&&(this.form.fundName=this.tableData[t].optionName,this.form.fundsTypeId=this.tableData[t].fundsSpecOptionId,this.form.fundsRate=this.tableData[t].fundsRate+"",this.form.remarks=this.tableData[t].remarks,this.form.id=e)},selChange:function(t){if(t){var e=this.fundType.filter(function(e){return e.id==t});this.form.fundName=e[0].fundName}},showAtApp:function(t){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/funds/type/setDisplay",method:"get",params:{fundAllocRuleId:t}}).then(function(t){0===t.data.retCode?(e.getFundList(),e.$Message.warning(t.data.retMsg||"操作成功！")):e.$Message.warning(t.data.retMsg||"操作失败！")}).catch(function(t){})},delFund:function(t,e){var a=this;this.$http({url:this.serviceurl+"/weteam-service/",method:"post",params:{fund:t}}).then(function(t){0===t.data.retCode?(a.tableData.splice(e,1),a.$Message.success(t.data.retMsg)):a.$Message.warning(t.data.retMsg)}).catch(function(t){})}}}},451:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("div",{staticClass:"cc-text-right"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.editPro(-1)}}},[t._v("新增")])],1),t._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData}}),t._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:t.total},on:{"on-change":t.pageChange}}),t._v(" "),a("Modal",{attrs:{title:"新增/编辑",loading:t.loading},on:{"on-ok":t.editConfirm},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("Form",{ref:"form",attrs:{model:t.form,"label-position":"left",rules:t.rules,"label-width":80}},[a("FormItem",{attrs:{label:"基金类型",prop:"fundsTypeId"}},[a("Select",{staticClass:"cc-w-300",on:{"on-change":t.selChange},model:{value:t.form.fundsTypeId,callback:function(e){t.$set(t.form,"fundsTypeId",e)},expression:"form.fundsTypeId"}},t._l(t.fundType,function(e){return a("Option",{key:e.fundName,attrs:{value:e.id}},[t._v(t._s(e.fundName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"所占比例",prop:"fundsRate"}},[a("Input",{staticClass:"cc-w-300",model:{value:t.form.fundsRate,callback:function(e){t.$set(t.form,"fundsRate",e)},expression:"form.fundsRate"}})],1),t._v(" "),a("FormItem",{attrs:{label:"备注",prop:"remarks"}},[a("Input",{staticClass:"cc-w-300",model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)],1)],1)],1)},s=[];n._withStripped=!0;var i={render:n,staticRenderFns:s};e.default=i}});