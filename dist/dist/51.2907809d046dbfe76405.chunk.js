webpackJsonp([51],{253:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(349),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(463),o=a.n(s),c=a(6),l=c(i.a,o.a,!1,null,null,null);l.options.__file="src/views/fileManagement/file/file.vue",e.default=l.exports},349:function(t,e,a){"use strict";function n(t){if(0===t)return"0 B";var e=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,a)).toFixed(2)+" "+e[a]}Object.defineProperty(e,"__esModule",{value:!0});var i=a(23),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){var t=this;return{previewModal:!1,previewData:{type:"",resUrlType:"",resUrl:""},query:{page:0,size:10,title:"",topicId:"",type:"",status:""},comList:[{topicId:-1,topicName:"全部"}],total:0,current:1,table:[{title:"序号",type:"index",width:100,align:"center"},{title:"文件名称",key:"title"},{title:"文件描述",key:"summary"},{title:"专栏",key:"topicName"},{title:"文件类型",key:"type",render:function(t,e){var a="";switch(e.row.type){case 1:a="视频";break;case 2:a="文档"}return t("p",a)}},{title:"文件大小",key:"fileSize",render:function(t,e){return t("p",e.row.fileSize?n(e.row.fileSize):"-")}},{title:"状态",key:"status",render:function(t,e){var a="";switch(e.row.status){case 0:a="新建";break;case 1:a="使用中";break;case 2:a="审核不通过";break;case 3:a="下架"}return t("p",a)}},{title:"操作",key:"action",width:500,align:"center",render:function(e,a){return e("div",[e("Button",{style:{marginRight:"5px"},on:{click:function(){t.$router.push({name:"editFile",query:{contentId:a.row.contentId,topicId:a.row.topicId}})}}},"编辑"),e("Button",{style:{marginRight:"5px"},on:{click:function(){t.previewModal=!0,t.previewData.type=a.row.type,t.previewData.resUrlType=a.row.resUrlType,t.previewData.resUrl=a.row.resUrl}}},"预览"),e("Button",{style:{marginRight:"5px",display:1===a.row.status?"inline-block":"none"},on:{click:function(){t.soldOut(a.row.contentId)}}},"下架"),e("Button",{style:{marginRight:"5px",display:3===a.row.status?"inline-block":"none"},on:{click:function(){t.putAway(a.row.contentId)}}},"上架"),e("Button",{style:{marginRight:"5px",display:a.row.isRecommend?"none":"inline-block"},on:{click:function(){t.setCommend(a.row.contentId,!0)}}},"设为推荐"),e("Button",{style:{marginRight:"5px",display:a.row.isRecommend?"inline-block":"none"},on:{click:function(){t.setCommend(a.row.contentId,!1)}}},"取消推荐"),e("Button",{style:{marginRight:"5px"},on:{click:function(){t.$Modal.confirm({title:"确认删除",content:"确认删除？",onOk:function(){t.del(a.row.contentId)}})}}},"删除"),e("Button",{style:{marginRight:"5px"},on:{click:function(){t.move(a.row.topicId,a.row.contentId,"UP")}}},"上移"),e("Button",{on:{click:function(){t.move(a.row.topicId,a.row.contentId,"DOWN")}}},"下移")])}}],tableData:[]}},created:function(){this.getFileList(),this.getComAll()},methods:{getFileList:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/wt/content/page",method:"get",params:this.query}).then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(t){})},getComAll:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service//wt/topic/comAll",method:"get"}).then(function(e){if(0===e.data.retCode){var a;(a=t.comList).push.apply(a,(0,r.default)(e.data.data))}else t.$Message.warning(e.data.retMsg)}).catch(function(t){})},pageChange:function(t){this.query.page=t-1,this.getFileList()},topicIdChange:function(t){this.query.topicId=-1===t?"":t},typeChange:function(t){this.query.type=-1===t?"":t},statusChange:function(t){this.query.status=-1===t?"":t},search:function(){this.query.page=0,this.getFileList(),this.current=1},soldOut:function(t){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/wt/content/soldOut",method:"get",params:{contentId:t}}).then(function(t){0===t.data.retCode?(e.getFileList(),e.$Message.success(t.data.retMsg||"下架成功！")):e.$Message.warning(t.data.retMsg||"下架失败！")}).catch(function(t){})},putAway:function(t){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/wt/content/putAway",method:"get",params:{contentId:t}}).then(function(t){0===t.data.retCode?(e.getFileList(),e.$Message.success(t.data.retMsg||"上架成功！")):e.$Message.warning(t.data.retMsg||"上架失败！")}).catch(function(t){})},setCommend:function(t,e){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/wt/content/setCommend",method:"get",params:{contentId:t,isCommend:e}}).then(function(t){0===t.data.retCode?(a.getFileList(),a.$Message.success(t.data.retMsg||"设置成功！")):a.$Message.warning(t.data.retMsg||"设置失败！")}).catch(function(t){})},del:function(t){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/wt/content/del",method:"delete",params:{contentId:t}}).then(function(t){0===t.data.retCode?(e.getFileList(),e.$Message.success(t.data.retMsg||"删除成功！")):e.$Message.warning(t.data.retMsg||"删除失败！")}).catch(function(t){})},move:function(t,e,a){var n=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/wt/content/move",method:"get",params:{topicId:t,contentId:e,direction:a}}).then(function(t){0===t.data.retCode?(n.getFileList(),n.$Message.success(t.data.retMsg||"操作成功！")):n.$Message.warning(t.data.retMsg||"操作失败！")}).catch(function(t){})},previewCancel:function(){this.previewData.type="",this.previewData.resUrlType="",this.previewData.resUrl=""}}}},463:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"4"}}),t._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"20"}},[a("Input",{staticClass:"cc-w-200",attrs:{placeholder:"文件名"},model:{value:t.query.title,callback:function(e){t.$set(t.query,"title",e)},expression:"query.title"}}),t._v("  \n      专栏：\n      "),a("Select",{staticClass:"cc-w-100 cc-text-left",on:{"on-change":t.topicIdChange}},t._l(t.comList,function(e){return a("Option",{key:e.topicId,attrs:{value:e.topicId}},[t._v(t._s(e.topicName))])})),t._v("  \n      类型：\n      "),a("Select",{staticClass:"cc-w-100 cc-text-left",on:{"on-change":t.typeChange}},[a("Option",{attrs:{value:-1}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:1}},[t._v("视频")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("文档")])],1),t._v("  \n      状态：\n      "),a("Select",{staticClass:"cc-w-100 cc-text-left",on:{"on-change":t.statusChange}},[a("Option",{attrs:{value:-1}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:1}},[t._v("使用中")]),t._v(" "),a("Option",{attrs:{value:3}},[t._v("下架")])],1),t._v("  \n      "),a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("router-link",{attrs:{to:{name:"addFile"}}},[a("Button",{attrs:{type:"primary"}},[t._v("新增文件")])],1)],1)],1),t._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData}}),t._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:t.total,current:t.current},on:{"update:current":function(e){t.current=e},"on-change":t.pageChange}}),t._v(" "),a("Modal",{attrs:{title:"预览",width:"800"},on:{"on-cancel":t.previewCancel},model:{value:t.previewModal,callback:function(e){t.previewModal=e},expression:"previewModal"}},[1===t.previewData.type&&1===t.previewData.resUrlType?a("video",{attrs:{src:t.previewData.resUrl,controls:"controls",width:"100%",height:"500"}},[t._v("您的浏览器不支持 video 标签。")]):t._e(),t._v(" "),1===t.previewData.type&&2===t.previewData.resUrlType?a("iframe",{attrs:{frameborder:"0",allowfullscreen:"true",width:"100%",height:"500",src:t.previewData.resUrl}}):t._e(),t._v(" "),2===t.previewData.type?a("iframe",{attrs:{frameborder:"0",width:"100%",height:"600",src:t.previewData.resUrl}}):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r}});