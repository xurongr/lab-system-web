webpackJsonp([37],{235:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(331),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var o=a(437),s=a.n(o),d=a(6),c=d(i.a,s.a,!1,null,null,null);c.options.__file="src/views/teamManagement/directorate/directorate.vue",e.default=c.exports},331:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=this;return{loading:!0,query:{pageNo:0,pageSize:10},total:0,addModal:!1,form:{name:"",description:""},rules:{name:[{required:!0,message:"请选择部门",trigger:"change"}],description:[{required:!0,message:"请填写部门描述",trigger:"blur"}]},departmentList:{},table:[{title:"序号",type:"index",width:100,align:"center"},{title:"部门名称",key:"name"},{title:"部门描述",key:"description"},{title:"部门人数",key:"deptNum"},{title:"创建时间",key:"createTime",render:function(e,a){return e("div",[e("p",{},t.formatDate(new Date(a.row.createTime),"yyyy-MM-dd hh:mm"))])}},{title:"操作",key:"action",width:200,align:"center",render:function(e,a){return e("div",[e("Button",{style:{marginRight:"5px"},on:{click:function(){t.$router.push({name:"memberManage",query:{name:a.row.name,id:a.row.id}})}}},"成员管理"),e("Button",{on:{click:function(){t.$Modal.confirm({title:"确认删除",content:"确认删除？",onOk:function(){t.delOrganization(a.row.id,a.index)}})}}},"删除")])}}],tableData:[]}},created:function(){this.getOrganizationList(),this.getDepartmentList()},methods:{getOrganizationList:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/organization/page",method:"get",params:this.query}).then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(t){})},pageChange:function(t){this.query.pageNo=t-1,this.getOrganizationList()},getDepartmentList:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/department/list",method:"get"}).then(function(e){0===e.data.retCode?t.departmentList=e.data.data:t.$Message.warning(e.data.retMsg)}).catch(function(t){})},handleSubmit:function(t){var e=this;this.$refs.form.validate(function(t){t?e.addOrganization():(e.loading=!1,setTimeout(function(){e.loading=!0},200))})},add:function(){this.addModal=!0,this.$refs.form.resetFields()},addOrganization:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/organization/create",method:"post",data:this.form}).then(function(e){0===e.data.retCode?(t.addModal=!1,t.$Message.success("部门新增成功！"),t.getOrganizationList()):(t.loading=!1,setTimeout(function(){t.loading=!0},200),t.$Message.warning(e.data.retMsg))}).catch(function(e){t.addModal=!1})},delOrganization:function(t,e){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/organization/delete/"+t,method:"post"}).then(function(t){0===t.data.retCode?(a.tableData.splice(e,1),a.$Message.success(t.data.retMsg)):a.$Message.warning(t.data.retMsg)}).catch(function(t){})}}}},437:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"20"}}),t._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增部门")])],1)],1),t._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData}}),t._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:t.total},on:{"on-change":t.pageChange}}),t._v(" "),a("Modal",{attrs:{title:"新增部门",loading:t.loading},on:{"on-ok":t.handleSubmit},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[a("Form",{ref:"form",staticClass:"cc-m-t-10",attrs:{model:t.form,rules:t.rules,"label-width":80}},[a("FormItem",{attrs:{label:"部门名称",prop:"name"}},[a("Select",{staticClass:"cc-w-300",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.departmentList,function(e){return a("Option",{key:e.id,attrs:{value:e.departmentName}},[t._v(t._s(e.departmentName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"部门描述",prop:"description"}},[a("Input",{staticClass:"cc-w-300",attrs:{type:"textarea",placeholder:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r}});