webpackJsonp([14],{234:function(t,e,a){"use strict";function s(t){c||a(326)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(278),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a(328),l=a.n(r),c=!1,f=a(9),p=s,u=f(o.a,l.a,!1,p,"data-v-1be2d7e4",null);u.options.__file="src/views/storeManagement/staffManagement.vue",e.default=u.exports},278:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{shopId:null,pageNo:0,pageNo1:0,total:0,current:1,tableData:[],keyword:"",userList:[],userSelect:[],verifyPower:!1,staffId:null,shopStaffDto:{parentId:null,userId:null,shopId:this.$route.query.shopId,roleName:"",verifyPower:null},phone:null,level:1,levelList:[{value:"全部",label:"全部"},{value:"普通会员",label:"普通会员"},{value:"百草品客",label:"百草品客"},{value:"百草创客",label:"百草创客"},{value:"健康大使",label:"股东"}],start:!1,isEditMem:!1,flag:null,table:[{title:"序号",type:"index",align:"center",width:60},{title:"员工名称",align:"center",key:"name"},{title:"手机号码",align:"center",key:"phone"},{title:"角色",align:"center",key:"roleName"},{title:"状态",align:"center",key:"shopStatus",render:function(t,e){return t("div",[t("p",{style:{color:2===e.row.shopStatus?"red":"#444"}},1===e.row.shopStatus?"在职":2===e.row.shopStatus?"停职":"离职")])}},{title:"创建时间",align:"center",key:"createTime"},{title:"更新时间",align:"center",key:"updateTime"}]}},created:function(){this.shopId=this.$route.query.shopId,this.getShopMemList(),this.getUserList()},methods:{modalSet:function(t){this.flag=t,1===t?(this.dataInitialization(),this.isEditMem=!0):2===t&&(null===this.staffId?this.$Message.warning("请先选择店员！"):this.isEditMem=!0)},getUserList:function(){var t=this,e=this.serviceurl+"/backstage/level/pageUser",a={pageNo:t.pageNo1,pageSize:10},s=null;t.$http(e,a,s,"get").then(function(e){s=e.data,0===s.retCode?(t.userList=t.userList.concat(s.data.data),t.userList.map(function(e){t.userSelect.push({value:parseInt(e.id),label:e.name})}),t.userList.length<parseInt(s.data.total)&&(t.pageNo1++,t.getUserList())):t.$Message.warning(s.retMsg)}).catch(function(t){})},choiceUser:function(t,e){this.staffId=t.id,this.shopStaffDto=t,this.shopStaffDto.parentId=parseInt(this.shopStaffDto.parentId),this.shopStaffDto.userId=parseInt(this.shopStaffDto.userId),0===this.shopStaffDto.verifyPower?this.verifyPower=!1:this.verifyPower=!0},changePage:function(t){this.pageNo=t-1,this.getShopMemList()},searchStaff:function(){this.pageNo=0,this.getShopMemList()},getShopMemList:function(){var t=this,e=t.serviceurl+"/backstage/shop/pageShopMem",a={shopId:t.shopId,keyword:t.keyword,pageNo:t.pageNo,pageSize:10};t.$http(e,a,"","get").then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(e){t.$Message.error("请求错误")})},editShopMem:function(){var t=this,e=t.serviceurl+"/backstage/shop/addOrModyfyShopMem";!0===t.verifyPower?t.shopStaffDto.verifyPower=1:t.shopStaffDto.verifyPower=0,2===t.flag&&(t.shopStaffDto.updateTime=(new Date).getTime());var a=t.shopStaffDto;t.$http(e,"",a,"post").then(function(e){0===e.data.retCode?(t.isEditMem=!1,t.getShopMemList(),1===t.flag?t.$Message.success("员工添加成功！"):t.$Message.success("员工修改成功！"),t.dataInitialization()):1===t.flag?t.$Message.warning(e.data.retMsg||"员工添加失败！"):t.$Message.warning(e.data.retMsg||"员工修改失败！")}).catch(function(e){t.$Message.error("请求错误")})},changeMemStatus:function(t){var e=this;if(null===e.staffId)e.$Message.warning("请先选择员工！");else{var a=e.serviceurl+"/backstage/shop/addOrModyfyShopMem";e.shopStaffDto.updateTime=(new Date).getTime(),e.shopStaffDto.shopStatus=t,e.shopStaffDto.shopId=e.staffId;var s=e.shopStaffDto;e.$http(a,"",s,"post").then(function(t){0===t.data.retCode?(e.isEditMem=!1,e.getShopMemList(),e.$Message.success("员工状态修改成功！"),e.dataInitialization()):e.$Message.warning(t.data.retMsg||"员工状态修改失败！")}).catch(function(t){e.$Message.error("请求错误")})}},dataInitialization:function(){var t=this;t.staffId=null,t.shopStaffDto={parentId:null,userId:null,shopId:this.$route.query.shopId,roleName:"",verifyPower:null}}}}},326:function(t,e,a){var s=a(327);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(16)("72b1b3c2",s,!1,{})},327:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.staff-setting[data-v-1be2d7e4] {\n  font-size: 14px;\n}\n.staff-setting p[data-v-1be2d7e4] {\n  padding-top: 10px;\n}\n.staff-setting p[data-v-1be2d7e4]:nth-child(1) {\n  text-align: center;\n  padding-top: 0;\n  font-weight: 600;\n  letter-spacing: 1px;\n}\n.staff-setting .tips[data-v-1be2d7e4] {\n  color: red;\n  font-size: 12px;\n  text-indent: 6em;\n}\n.staff-setting .level-btn[data-v-1be2d7e4] {\n  text-align: center;\n  margin-top: 20px;\n}\n",""])},328:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"cc-m-b-10 member-list-search"},[a("div",{staticClass:"m-search-top"},[a("div",{staticClass:"m-search-top-left"},[a("p",[t._v("员工名称   "),a("Input",{staticStyle:{width:"110px"},attrs:{placeholder:"关键字模糊搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),t._v(" "),a("div",{staticClass:"m-search-btn"},[a("Button",{staticClass:"btn btn-b-hover",on:{click:t.searchStaff}},[t._v("查询")]),t._v(" "),a("Button",{staticClass:"btn btn-b-hover",on:{click:function(e){return t.modalSet(1)}}},[t._v("新增")]),t._v(" "),a("Button",{staticClass:"btn btn-b-hover",on:{click:function(e){return t.modalSet(2)}}},[t._v("编辑")]),t._v(" "),1!==t.shopStaffDto.shopStatus?a("Button",{staticClass:"btn btn-b-hover",on:{click:function(e){return t.changeMemStatus(1)}}},[t._v("启用")]):t._e(),t._v(" "),1===t.shopStaffDto.shopStatus?a("Button",{staticClass:"btn btn-b-hover",on:{click:function(e){return t.changeMemStatus(2)}}},[t._v("禁用")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"main-body"},[a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData,"highlight-row":!0},on:{"on-row-click":t.choiceUser}}),t._v(" "),a("div",{staticClass:"page"},[a("Page",{key:t.total,staticClass:"cc-m-t-20",attrs:{total:t.total,current:t.current},on:{"on-change":t.changePage}})],1)],1),t._v(" "),a("Modal",{attrs:{"footer-hide":!0,styles:{top:"30%"}},model:{value:t.isEditMem,callback:function(e){t.isEditMem=e},expression:"isEditMem"}},[a("div",{staticClass:"staff-setting"},[1===t.flag?a("p",[t._v("新增")]):t._e(),t._v(" "),2===t.flag?a("p",[t._v("编辑")]):t._e(),t._v(" "),a("p",[t._v("父级账户  \n                "),a("Select",{staticStyle:{width:"75%"},attrs:{clearable:!0},model:{value:t.shopStaffDto.parentId,callback:function(e){t.$set(t.shopStaffDto,"parentId",e)},expression:"shopStaffDto.parentId"}},t._l(t.userSelect,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("p",[t._v("选择账户  \n                "),a("Select",{staticStyle:{width:"75%"},model:{value:t.shopStaffDto.userId,callback:function(e){t.$set(t.shopStaffDto,"userId",e)},expression:"shopStaffDto.userId"}},t._l(t.userSelect,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("p",[t._v("店铺角色   "),a("Input",{staticStyle:{width:"75%"},attrs:{placeholder:"输入角色，如：店长、员工"},model:{value:t.shopStaffDto.roleName,callback:function(e){t.$set(t.shopStaffDto,"roleName",e)},expression:"shopStaffDto.roleName"}})],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("角色会在前端显示，收益根据会员等级，在会员列表设置")]),t._v(" "),a("p",[t._v("核销权限  \n                "),a("i-switch",{attrs:{size:"large"},model:{value:t.verifyPower,callback:function(e){t.verifyPower=e},expression:"verifyPower"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("会员定制商品，用来核销定制成功的订单")]),t._v(" "),a("div",{staticClass:"level-btn"},[a("Button",{staticClass:"btn btn-blue",on:{click:t.editShopMem}},[t._v("保存")])],1)])])],1)},n=[];s._withStripped=!0;var o={render:s,staticRenderFns:n};e.default=o}});