webpackJsonp([52],{251:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(347),n=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);var i=a(461),o=a.n(i),c=a(6),l=c(n.a,o.a,!1,null,null,null);l.options.__file="src/views/communicationManagement/communication/index.vue",t.default=l.exports},347:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return{rechargeModal:!1,denominationList:[],query:{pageNo:0,pageSize:10,userInfo:""},total:0,current:1,table:[{title:"",type:"selection",width:100,align:"center"},{title:"用户名",key:"userName"},{title:"手机号码",key:"phoneNumber"},{title:"话费累计总额",key:"sumPhoneRental"},{title:"团队充值次数",key:"rechargeTimes"},{title:"团队充值总额",key:"rechargeTeamRental"},{title:"会员自充次数",key:"rechargeSelfTimes"},{title:"会员自充总额",key:"rechargeSelfRental"},{title:"话费余额",key:"phoneBalance"},{title:"操作",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{style:{marginRight:"5px"},on:{click:function(){e.form.userId=a.row.userId,e.form.userName=a.row.userName,e.form.userPhone=a.row.phoneNumber,e.form.id=e.denominationList[0]?e.denominationList[0].id:"",e.rechargeModal=!0}}},"充值")])}}],tableData:[],form:{id:"",userId:"",userName:"",userPhone:""}}},created:function(){this.$store.commit("resetBatchRechargeList"),this.getMemberList(),this.getDenominationList()},methods:{getMemberList:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/pageMembers",method:"get",params:this.query}).then(function(t){if(0===t.data.retCode){var a=e.$store.state.communication.batchRechargeList;e.tableData=t.data.data.data,e.tableData.forEach(function(e){a.indexOf(e.userId)>-1&&(e._checked=!0)}),e.total=parseInt(t.data.data.total)}else e.$Message.warning(t.data.retMsg)}).catch(function(e){})},getDenominationList:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/listAllDenomination",method:"get"}).then(function(t){0===t.data.retCode?e.denominationList=t.data.data:e.$Message.warning(t.data.retMsg)}).catch(function(e){})},pageChange:function(e){this.query.pageNo=e-1,this.getMemberList()},search:function(){this.query.pageNo=0,this.getMemberList(),this.current=1},confirmRecharge:function(){var e=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/teamRecharge?num=1",method:"post",data:[this.form]}).then(function(t){0===t.data.retCode?(e.getMemberList(),e.$Message.success(t.data.retMsg||"充值成功！")):e.$Message.warning(t.data.retMsg||"充值失败！")}).catch(function(e){})},selectAll:function(e){var t=[];e.forEach(function(e){t.push(e.userId)}),this.$store.commit("setBatchRechargeList",{list:t,flag:0})},select:function(e,t){this.$store.commit("setBatchRechargeList",{list:[t.userId],flag:0})},selectCancel:function(e,t){this.$store.commit("setBatchRechargeList",{list:[t.userId],flag:1})},selectChange:function(e){if(0==e.length){var t=[];this.tableData.forEach(function(e){t.push(e.userId)}),this.$store.commit("setBatchRechargeList",{list:t,flag:1})}}}}},461:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"4"}}),e._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"20"}},[a("Input",{staticClass:"cc-w-200",attrs:{placeholder:"用户名/手机号码"},model:{value:e.query.userInfo,callback:function(t){e.$set(e.query,"userInfo",t)},expression:"query.userInfo"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("router-link",{attrs:{to:{name:"memberRecharge"}}},[a("Button",{attrs:{type:"primary"}},[e._v("批量充值")])],1)],1)],1),e._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:e.table,data:e.tableData},on:{"on-select-all":e.selectAll,"on-select":e.select,"on-select-cancel":e.selectCancel,"on-selection-change":e.selectChange}}),e._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:e.total,current:e.current},on:{"update:current":function(t){e.current=t},"on-change":e.pageChange}}),e._v(" "),a("Modal",{attrs:{"ok-text":"确定充值",title:"预览"},on:{"on-ok":e.confirmRecharge},model:{value:e.rechargeModal,callback:function(t){e.rechargeModal=t},expression:"rechargeModal"}},[a("Form",{ref:"form"},[a("FormItem",{attrs:{label:"充值会员"}},[e._v(e._s(e.form.userName))]),e._v(" "),a("FormItem",{attrs:{label:"充值面额"}},[a("Select",{staticClass:"cc-w-300",model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}},e._l(e.denominationList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.denomination))])}))],1)],1)],1)],1)},n=[];r._withStripped=!0;var s={render:r,staticRenderFns:n};t.default=s}});