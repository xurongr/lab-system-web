webpackJsonp([59],{261:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(358),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);var s=a(476),c=a.n(s),o=a(6),u=o(n.a,c.a,!1,null,null,null);u.options.__file="src/views/activityManagement/activityList.vue",e.default=u.exports},358:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=this;return{CurrentDate:"",timer:"",activityType:[],query:{page:0,size:10,id:"",state:"",keyword:""},total:0,current:1,table:[{title:"序号",type:"index",width:100,align:"center"},{title:"活动名称",key:"actiName"},{title:"开始时间",key:"startTime",render:function(t,e){return t("p",e.row.startTime?e.row.startTime:"-")}},{title:"结束时间",key:"endTime",render:function(t,e){return t("p",e.row.endTime?e.row.endTime:"-")}},{title:"倒计时",key:"continueTime",render:function(t,e){return t("p",e.row.continueTime?e.row.continueTime:"-")}},{title:"活动类型",key:"type",render:function(e,a){var i=t.activityType.filter(function(t){return t.id===a.row.actiMainId});return e("p",i.length?i[0].actiName:"")}},{title:"活动对象",key:"object",render:function(t,e){var a="";switch(e.row.object){case 0:a="部分成员";break;case 1:a="全部成员"}return t("p",a)}},{title:"活动金额",key:"totalMoney"},{title:"已领取金额",key:"alreadyMoney",render:function(t,e){return t("p",e.row.alreadyMoney?e.row.alreadyMoney:"-")}},{title:"活动状态",key:"state",render:function(e,a){var i="",n=t.CurrentDate;switch(a.row.state){case 0:i="已结束";break;case 1:i="上架",n<a.row.startTime&&(i="未开始"),a.row.startTime<n&&n<a.row.endTime&&(i="进行中"),(n>a.row.endTime||2==a.row.actiMainId)&&(i="已结束")}return e("p",i)}},{title:"操作",key:"action",width:350,align:"center",render:function(e,a){return e("div",[e("Button",{style:{marginRight:"5px",display:1===a.row.state&&a.row.startTime<t.CurrentDate&&t.CurrentDate<a.row.endTime?"inline-block":"none"},on:{click:function(){t.editState(a.row.id,0)}}},"下架"),e("Button",{style:{marginRight:"5px",display:1===a.row.state&&t.CurrentDate<a.row.startTime?"inline-block":"none"},on:{click:function(){t.$router.push({name:"editActivity",query:{id:a.row.id}})}}},"编辑"),e("Button",{style:{marginRight:"5px",display:1===a.row.state&&a.row.startTime<t.CurrentDate&&t.CurrentDate<a.row.endTime?"none":"inline-block"},on:{click:function(){t.$Modal.confirm({title:"确认删除",content:"确认删除？",onOk:function(){t.del(a.row.id)}})}}},"删除"),e("Button",{style:{marginRight:"5px",display:0===a.row.state||t.CurrentDate>a.row.endTime||2==a.row.actiMainId||a.row.startTime<t.CurrentDate&&t.CurrentDate<a.row.endTime?"inline-block":"none"},on:{click:function(){t.$router.push({name:"receiveDetail",query:{id:a.row.id}})}}},"领取明细")])}}],tableData:[]}},created:function(){this.getActivityType(),this.getActivityList()},mounted:function(){this.CurrentDate=this.formatDate(new Date,"yyyy-MM-dd hh:mm:ss")},methods:{getActivityList:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/activity/get",method:"get",params:this.query}).then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(t){})},pageChange:function(t){this.query.page=t-1,this.getActivityList()},getActivityType:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/activityMain/get",method:"get",params:this.query}).then(function(e){0===e.data.retCode?t.activityType=e.data.data:t.$Message.warning(e.data.retMsg)}).catch(function(t){})},editState:function(t,e){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/activity/editState",method:"get",params:{id:t,state:e}}).then(function(t){0===t.data.retCode?(a.getActivityList(),a.$Message.success(t.data.retMsg||"操作成功！")):a.$Message.warning(t.data.retMsg||"操作失败！")}).catch(function(t){})},del:function(t){var e=this;this.$http({url:this.serviceurl+"/weteam-service//mgt/activity/del",method:"get",params:{id:t}}).then(function(t){0===t.data.retCode?(e.getActivityList(),e.$Message.success(t.data.retMsg||"删除成功！")):e.$Message.warning(t.data.retMsg||"删除失败！")}).catch(function(t){})},typeChange:function(t){this.query.id=-1===t?"":t},statusChange:function(t){this.query.state=-1===t?"":t},search:function(){this.query.page=0,this.current=1,this.getActivityList()}}}},476:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"4"}}),t._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"20"}},[t._v("\n          活动状态：\n          "),a("Select",{staticClass:"cc-w-100 cc-text-left",on:{"on-change":t.statusChange}},[a("Option",{attrs:{value:-1}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:0}},[t._v("未开始")]),t._v(" "),a("Option",{attrs:{value:1}},[t._v("进行中")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("已结束")])],1),t._v("\n            \n          活动类型：\n          "),a("Select",{staticClass:"cc-w-100 cc-text-left",on:{"on-change":t.typeChange}},[a("Option",{attrs:{value:-1}},[t._v("全部")]),t._v(" "),t._l(t.activityType,function(e){return a("Option",{key:e.value,attrs:{value:e.id}},[t._v(t._s(e.actiName))])})],2),t._v("\n             \n          "),a("Input",{staticClass:"cc-w-200",attrs:{placeholder:"关键字搜索/活动名称"},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}}),t._v("\n            \n          "),a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("router-link",{attrs:{to:{name:"addActivity"}}},[a("Button",{attrs:{type:"primary"}},[t._v("新建活动")])],1)],1)],1),t._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData}}),t._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:t.total,current:t.current},on:{"update:current":function(e){t.current=e},"on-change":t.pageChange}})],1)},n=[];i._withStripped=!0;var r={render:i,staticRenderFns:n};e.default=r}});