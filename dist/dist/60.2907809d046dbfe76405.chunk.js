webpackJsonp([60],{248:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(344),o=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var n=a(452),s=a.n(n),l=a(6),c=l(o.a,s.a,!1,null,null,null);c.options.__file="src/views/IM/groupManagement.vue",e.default=c.exports},344:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=this;return{editModal:!1,form:{grpName:"",intro:"",joinmode:"",catalog:""},joinmodeList:[{value:0,label:"不用验证"},{value:1,label:"需要验证"},{value:2,label:"不允许任何人加入"}],query:{pageNo:0,pageSize:10,keyword:""},total:0,current:1,table:[{title:"序号",type:"index",width:100,align:"center"},{title:"群组名称",key:"grpName"},{title:"管理员",key:"ownerName"},{title:"加群方式",key:"joinmode",render:function(t,e){var a="";switch(e.row.joinmode){case 0:a="不用验证";break;case 1:a="需要验证";break;case 2:a="不允许任何人加入"}return t("div",[t("p",{},a)])}},{title:"企业类目",key:"catalog",render:function(t,e){var a="";switch(e.row.catalog){case 1:a="城市大咖";break;case 2:a="兴趣部落"}return t("div",[t("p",{},a)])}},{title:"操作",key:"action",width:200,align:"center",render:function(e,a){return e("div",[e("Button",{style:{marginRight:"5px"},on:{click:function(){t.edit(a.index)}}},"编辑群"),e("Button",{on:{click:function(){t.$Modal.confirm({title:"确认解散",content:"确认解散？",onOk:function(){t.delGroup(a.row.id,a.index)}})}}},"解散群")])}}],tableData:[]}},created:function(){this.getGroupList()},methods:{getGroupList:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/page",method:"get",params:this.query}).then(function(e){0===e.data.retCode?(t.tableData=e.data.data.data,t.total=parseInt(e.data.data.total)):t.$Message.warning(e.data.retMsg)}).catch(function(t){})},pageChange:function(t){this.query.pageNo=t-1,this.getGroupList()},search:function(){this.query.pageNo=0,this.getGroupList(),this.current=1},edit:function(t){this.editModal=!0,this.form.grpName=this.tableData[t].grpName,this.form.intro=this.tableData[t].intro,this.form.joinmode=this.tableData[t].joinmode,this.form.catalog=this.tableData[t].catalog,this.form.userGrpId=this.tableData[t].id},editGroup:function(){var t=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/update",method:"post",data:this.form}).then(function(e){0===e.data.retCode?(t.$Message.success(e.data.retMsg||"编辑成功！"),t.getGroupList()):t.$Message.warning(e.data.retMsg)}).catch(function(t){})},delGroup:function(t,e){var a=this;this.$http({url:this.serviceurl+"/weteam-service/mgt/group/dissolve",method:"post",params:{group:t}}).then(function(t){0===t.data.retCode?(a.tableData.splice(e,1),a.$Message.success(t.data.retMsg)):a.$Message.warning(t.data.retMsg)}).catch(function(t){})}}}},452:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-body"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"4"}}),t._v(" "),a("Col",{staticClass:"cc-text-right",attrs:{span:"20"}},[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:"群组名称/关键词"},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}}),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("router-link",{attrs:{to:{name:"addGroup"}}},[a("Button",{attrs:{type:"primary"}},[t._v("新建")])],1)],1)],1),t._v(" "),a("Table",{staticClass:"cc-m-t-20",attrs:{border:"",columns:t.table,data:t.tableData}}),t._v(" "),a("Page",{staticClass:"cc-m-t-20",attrs:{total:t.total,current:t.current},on:{"update:current":function(e){t.current=e},"on-change":t.pageChange}}),t._v(" "),a("Modal",{attrs:{title:"编辑群"},on:{"on-ok":t.editGroup},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("Form",{attrs:{model:t.form,"label-width":120}},[a("FormItem",{attrs:{label:"群组名称"}},[a("Input",{staticClass:"cc-w-300",attrs:{placeholder:""},model:{value:t.form.grpName,callback:function(e){t.$set(t.form,"grpName",e)},expression:"form.grpName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"群组描述"}},[a("Input",{staticClass:"cc-w-300",attrs:{type:"textarea",placeholder:""},model:{value:t.form.intro,callback:function(e){t.$set(t.form,"intro",e)},expression:"form.intro"}})],1),t._v(" "),a("FormItem",{attrs:{label:"加群方式"}},[a("Select",{staticClass:"cc-w-300",model:{value:t.form.joinmode,callback:function(e){t.$set(t.form,"joinmode",e)},expression:"form.joinmode"}},t._l(t.joinmodeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"企业类目"}},[a("Select",{staticClass:"cc-w-300",model:{value:t.form.catalog,callback:function(e){t.$set(t.form,"catalog",e)},expression:"form.catalog"}},[a("Option",{attrs:{value:1}},[t._v("城市大咖")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("兴趣部落")])],1)],1)],1)],1)],1)},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};e.default=i}});